<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link rel="stylesheet" type="text/css" href="../css/productStore.css">
    <link rel="stylesheet" href="../font/iconfont.css">
    <link rel="stylesheet" href="../libs/bootstrap/css/bootstrap.min.css">
    <script src="../libs/jquery/jquery-2.1.1.min.js"></script>
    <script src="../libs/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../libs/angular/angular.min.js"></script>
    <script src="../libs/angular-ui/angular-ui-router.min.js"></script>
    <script src="../controllers/productStoreControllers.js"></script>
    <script src="../libs/angular/angular.global.js"></script>
    <script src="../controllers/indexController.js"></script>
</head>
<body ng-app = "indexApp">
    <div  ng-controller="indexController">   
        <div class="index-header">
            <div class="header-left">
                <i class="iconfont icon-shouye"></i>
                <span>tan90零售系统</span>
            </div>
            <div class="theme">
                <span class="themeChild" ng-bind="features.totalFeatures"></span>
                <span class="themeChild" ng-bind="features.childFeatures"></span>
            </div>
            <div class="index-login-box">
                <ul class="nav navbar-nav navbar-right" >
                    <li id="fat-menu"  class="dropdown">
                        <a id="drop3" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">
                            <i class="iconfont icon-shezhi"></i>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="drop3">
                            <li class="indexLoginLi">
                                <span>账号：</span>
                                <input class="indexLoginInput" disabled ng-model="account.name">
                            </li>
                            <li class="indexLoginLi">
                                <span>店名:</span>
                                <input class="indexLoginInput" disabled ng-model="account.shopName">
                            </li>
                            <li role="separator" class="divider"></li>
                            <li class="indexLoginLi"><botton class="indexLoginButton">退出登录</botton></li>
                        </ul>
                    </li>
                </ul>
            </div>
                
        </div>
        <div class="index-body-left">
            <div class="index-body-left-head">
                <span class="indexLeftSpan">功能列表</span>
                <i class="iconfont icon-suoyougongnengshouqi"></i>
            </div>
            <div class="index-body-left-list">
                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingOne">
                            <h4 class="panel-title">
                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" class="collapsed">
                                    产品库管理
                                </a>
                            </h4>
                        </div>
                        <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                    <li class="indexLeftBodyLi indexLeftBodyLi1">
                                        <a href="#/productStore" ng-click="changeHeadWord()">商品资料</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingTwo">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    采购管理
                                </a>
                            </h4>
                        </div>
                        <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                    <li class="indexLeftBodyLi">采购单</li>
                                    <li class="indexLeftBodyLi">供应商</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingThree">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    收货管理
                                </a>
                            </h4>
                        </div>
                        <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                    <li class="indexLeftBodyLi">收货单</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingFour">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                    入库
                                </a>
                            </h4>
                        </div>
                        <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                    <li class="indexLeftBodyLi">入库清单</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingFive">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                    上架管理
                                </a>
                            </h4>
                        </div>
                        <div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                    <li class="indexLeftBodyLi">上架清单</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingSix">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                    收银系统
                                </a>
                            </h4>
                        </div>
                        <div id="collapseSix" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSix" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <ul>
                                    <li class="indexLeftBodyLi">进入收银系统</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="indexBody">
        <div data-ui-view=""></div>
    </div>
    <script type="text/javascript">
        var indexApp = angular.module('indexApp', ['ui.router','productStoreApp','globalapp']);

        indexApp.controller('indexController', ['$scope', '$http','changeHeadWord', function($scope, $http,changeHeadWord){

            $scope.changeHeadWord = function(){
                $scope.features = {
                    totalFeatures: changeHeadWord.changeHeadWord().title1,
                    childFeatures: changeHeadWord.changeHeadWord().title2,
                }
            }
            $scope.account={
                name:'bjjbjj',
                shopName:'tan90'
            }
        }])
        indexApp.config(function($stateProvider,$urlRouterProvider){
            $stateProvider
                
                .state("productStore",{
                    url:"/productStore",
                    templateUrl:"productStore.html",
                    controller:'productStore'
                })
        });
        indexApp.controller('productStore',['$scope','$http','openProductStore','openAddUnit','closeAddUnit','openCategory','closeCategory','addTproducts','delAddProducts','addTunit','addTcategory','addProductContentBtn','addTsupplier','addUnitBtn','saveCategory','lookForMsg',function(bjscope,bjhttp,openProductStore,openAddUnit,closeAddUnit,openCategory,closeCategory,addTproducts,delAddProducts,addTunit,addTcategory,addProductContentBtn,addTsupplier,addUnitBtn,saveCategory,lookForMsg){
            //点击添加商品
            bjscope.addProductContentBtn = function(){
                addProductContentBtn.addProductContentBtn(bjscope,bjhttp,function(data){
                    addTproducts.addTproducts(bjhttp,function(data){
                        bjscope.tprodata = data
                    });
                })
                confirm('保存成功')
                addTproducts.addTproducts(bjhttp,function(data){
                    bjscope.tprodata = data
                });
            }
            
            //点击添加单位
            bjscope.addUnitBtn = function(){
                addUnitBtn.addUnitBtn(bjscope,bjhttp,function(data){
                })
                confirm('添加成功')
                addTunit.addTunit(bjhttp,function(data){
                    bjscope.tunit = data
                    bjscope.lookUnitNum = data.length;
                });
            }
            //点击搜索
            lookForMsg
            bjscope.lookForMsg = function(){
                lookForMsg.lookForMsg(bjscope,bjhttp,function(data){
                    console.log(data)
                })
                
            }
            //打开增加商品栏
            bjscope.openAddProduct = function(){
                bjscope.right = $('.addProductStore').css("right")
                bjscope.result = openProductStore.openAddProduct(bjscope.right);
                $('.addProductStore').css("right",bjscope.result)
            }
            //打开增加单位栏
           bjscope.openAddUnit = function(){
                bjscope.right = $('.addUnit').css("right")
                bjscope.result = openAddUnit.openAddUnit(bjscope.right);
                $('.addUnit').css("right",bjscope.result)
            }
            //关闭增加单位栏
            bjscope.closeAddUnit = function(){
                bjscope.right = $('.addUnit').css("right")
                bjscope.result = closeAddUnit.closeAddUnit(bjscope.right);
                $('.addUnit').css("right",bjscope.result)
            }
            //打开增加商品类别栏
            bjscope.openCategory = function(){
                bjscope.right = $('.category').css("right")
                bjscope.result = openCategory.openCategory(bjscope.right);
                $('.category').css("right",bjscope.result)
            }
            //关闭增加商品类别栏
            bjscope.closeCategory = function(){
                
                bjscope.right = $('.category').css("right")
                bjscope.result = closeCategory.closeCategory(bjscope.right);
                $('.category').css("right",bjscope.result)
            }
            //关闭增加商品类别栏
            bjscope.delAddProducts = function(){
                bjscope.right = $('.addProductStore').css("right")
                bjscope.result = delAddProducts.delAddProducts(bjscope.right);
                $('.addProductStore').css("right",bjscope.result)
            }

           //请求商品库数据
            addTproducts.addTproducts(bjhttp,function(data){
                bjscope.tprodata = data
              
                //  console.log(bjscope.tprodata)
            });
            
            //请求单位表格数据
            addTunit.addTunit(bjhttp,function(data){
                bjscope.tunit = data
                bjscope.lookUnitNum = data.length;
                //  console.log(bjscope.tunit)
            });
            //请求商品类别表格数据
            addTcategory.addTcategory(bjhttp,function(data){
                bjscope.tcategory = data
                bjscope.lookCategoryNum = data.length;
                //  console.log(bjscope.tcategory)
            });
            //请求供应商数据
            addTsupplier.addTsupplier(bjhttp,function(data){
                bjscope.tsupplier = data
                 console.log(bjscope.tsupplier)
            });
            //点击编辑商品
            // bjscope.resetbjProduct = function(){
            //     console.log(this)
            // }
            
            //储存商品类型
            bjscope.saveCategory = function(){
                saveCategory.saveCategory(bjscope,bjhttp,function(data){
                })
                confirm('添加成功')
                addTcategory.addTcategory(bjhttp,function(data){
                    bjscope.tcategory = data
                    bjscope.lookCategoryNum = data.length;
                    //  console.log(bjscope.tcategory)
                });
            }
        }])
        

    </script>
</body>
</html>